<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="_fragments :: head(~{::title})">
    <title>åšå®¢è¯¦æƒ…</title>
</head>
<link rel="stylesheet" href="../../static/lib/editormd/css/editormd.css" th:href="@{/lib/editormd/css/editormd.css}">

<body>
<div th:replace="admin/admin_fragments :: admin-header"></div>



<!--md editor-->
<div  class="m-container m-padded-tb-big">
    <div class="ui container">
        <form id="blog-form" action="#"  th:action="${blog==null}?@{/admin/blog/save}:@{/admin/blog/save/{id}(id=${blog.getBlogId()})}" method="post" class="ui form">
            <input type="hidden" name="id" >
            <div class="required field">
                <div class="ui left labeled input" style="margin-top: 50px!important;">
                    <div class="ui selection compact blue basic dropdown label">
                        <input type="hidden" name="blogType" th:value="${blog.getBlogType()}?'åŸåˆ›':'è½¬è½½'" >
                        <i class="dropdown icon"></i>
                        <div class="text">åŸåˆ›</div>
                        <div class="menu">
                            <div class="item" data-value="1">åŸåˆ›</div>
                            <div class="item" data-value="0">è½¬è½½</div>
                        </div>
                    </div>
                    <input type="text" name="blogTitle" th:value="${blog.getBlogTitle()}" placeholder="ç»™åšå®¢è¾“å…¥ä¸€ä¸ªæ ‡é¢˜å§ï½" >
                </div>
            </div>





            <div class=" field">
                <div class="ui left labeled action blue input" style="margin-top: 20px!important;">
                    <label class="ui compact blue basic label">æ ‡ç­¾</label>
                    <div class="ui fluid selection multiple search  dropdown">
                        <input type="hidden" name="categoryIds"  th:value="${blog.getCategoryIds()}">
                        <i class="dropdown icon"></i>
                        <div class="default text">æ ‡ç­¾</div>
                        <div class="menu">
                            <div th:each="category : ${categoryList}" class="item" data-value="1" th:data-value="${category.getCategoryId()}" th:text="${category.getCategoryName()}">logh_for_test</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="field">
                <input type="hidden" id="publishstatus" name="blogPublishStatus" value="1">
            </div>
            <div class="required field">
                <div class="ui left labeled blue  input" style="margin-top: 20px!important;margin-bottom: 18px">
                    <label class="ui blue basic label">å°é¢å›¾</label>
                    <input type="text" name="blogShowImg" th:value="${blog.getBlogShowImg()}" placeholder="å°é¢å›¾å¼•ç”¨åœ°å€">
                </div>
            </div>

            <div class="required field">
                <div id="md-content" style="z-index: 1 !important;">
                    <textarea name="blogContent" th:text="${blog.getBlogContent()}" placeholder="è®°å½•ä½ çš„æƒ³æ³•" maxlength="300">content</textarea>
                </div>
            </div>

            <div class="required field">
                <div id="md-description" style="z-index: 1 !important;">
                    <textarea name="blogDescription"  th:text="${blog.getBlogDescription()}" placeholder="æ·»åŠ ä¸€ä¸ªblogçš„æè¿° ğŸ’ğŸ’ğŸ’" maxlength="300">contentid</textarea>
                </div>
            </div>

            <div class="inline fields">
                <div class="field">
                    <div class="ui checkbox">
                        <input type="checkbox" id="shareStatement" name="shareStatement" class="hidden">
                        <label for="shareStatement">è½¬è½½å£°æ˜</label>
                    </div>
                </div>


                <div class="field">
                    <div class="ui checkbox">
                        <input type="checkbox" th:value="${blog.getEnableComments()}" id="commentable" name="enableComments" class="hidden">
                        <label for="commentable">è¯„è®º</label>
                    </div>
                </div>
            </div>

            <div class="ui error message ">
                <i class="icon close"></i>
            </div>
            <div class="ui m-right aligned container">
                <button type="button" class="ui button" onclick="window.history.go(-1)" >è¿”å›</button>
                <button type="button" id="save-btn" class="ui orange  button">ä¿å­˜</button>
                <button type="button" id="publish-btn" class="ui teal button">å‘å¸ƒ</button>
            </div>

        </form>
    </div>
</div>

<div th:replace="admin/admin_fragments :: admin-footer"></div>
<div th:replace="admin/admin_fragments :: admin-script"></div>
<script>
    $(".tag").hover(function () {
        $(this).addClass("animate__animated animate__heartBeat");
    }).mouseleave(function () {
        $(this).removeClass("animate__animated animate__heartBeat");
    });
    $("a").hover(function () {
        $(this).addClass("animate__animated animate__headShake");
    }).mouseleave(function () {
        $(this).removeClass("animate__animated animate__headShake");
    });
</script>
<script src="../../static/lib/editormd/editormd.js" th:src="@{/lib/editormd/editormd.js}"></script>
<script>

    //åˆå§‹åŒ–Markdownç¼–è¾‘å™¨
    var contentEditor;
    $(function() {
        contentEditor = editormd("md-content", {
            width   : "100%",
            height  : 640,
            syncScrolling : "single",
//        path    : "../static/lib/editormd/lib/"
            path    : "/lib/editormd/lib/",
            placeholder : "è¾“å…¥ä½ çš„æƒ³æ³• ğŸ’¡ğŸ’¡ğŸ’¡"
        });
    });

    $('.menu.toggle').click(function () {
        $('.m-item').toggleClass('m-mobile-hide');
    });

    $('.ui.dropdown').dropdown({
        on : 'click'
    });

    $('#save-btn').click(function () {     //ç‚¹å‡»ä¿å­˜ï¼Œä¿®æ”¹å‘å¸ƒçŠ¶æ€ä¸ºfalse
        $('[name="blogPublishStatus"]').val(false);
        $('#blog-form').submit();
    });


    $('#publish-btn').click(function () {   //ç‚¹å‡»å‘å¸ƒï¼Œä¿®æ”¹å‘å¸ƒçŠ¶æ€ä¸ºtrue
        $('[name="blogPublishStatus"]').val(true);
        $('#blog-form').submit();
    });
    $('.message .close')
        .on('click', function() {
            $(this)
                .closest('.message')
                .transition('fade')
            ;
        });



    $('.ui.form').form({    //è¡¨å•å…ƒç´ éç©ºéªŒè¯
        fields : {
            title : {
                identifier: 'blogTitle',
                rules: [{
                    type : 'empty',
                    prompt: 'è¯·è¾“å…¥åšå®¢æ ‡é¢˜'
                }]
            },
            content : {
                identifier: 'blogContent',
                rules: [{
                    type : 'empty',
                    prompt: 'è¯·è¾“å…¥åšå®¢å†…å®¹'
                }]
            },
            firstPicture : {
                identifier: 'blogShowImg',
                rules: [{
                    type : 'empty',
                    prompt: 'è¯·è¾“å…¥åšå®¢å°é¢å›¾åœ°å€'
                }]
            },
            description : {
                identifier: 'blogDescription',
                rules: [{
                    type : 'empty',
                    prompt: 'è¯·è¾“å…¥åšå®¢æè¿°'
                }]
            }
        }
    });

</script>

</body>
</html>